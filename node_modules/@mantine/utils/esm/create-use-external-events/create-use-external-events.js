import { useMemo, useEffect } from 'react';

function dispatchEvent(type, detail) {
  window.dispatchEvent(new CustomEvent(type, { detail }));
}
function createUseExternalEvents(prefix) {
  function _useExternalEvents(events) {
    const handlers = Object.keys(events).reduce((acc, eventKey) => {
      acc[`${prefix}:${eventKey}`] = (event) => events[eventKey](event.detail);
      return acc;
    }, {});
    useMemo(() => {
      if (typeof window !== "undefined") {
        Object.keys(handlers).forEach((eventKey) => {
          window.removeEventListener(eventKey, handlers[eventKey]);
          window.addEventListener(eventKey, handlers[eventKey]);
        });
      }
    }, []);
    useEffect(() => () => Object.keys(handlers).forEach((eventKey) => {
      window.removeEventListener(eventKey, handlers[eventKey]);
    }), []);
  }
  function createEvent(event) {
    return (...payload) => dispatchEvent(`${prefix}:${String(event)}`, payload[0]);
  }
  return [_useExternalEvents, createEvent];
}

export { createUseExternalEvents };
//# sourceMappingURL=create-use-external-events.js.map
